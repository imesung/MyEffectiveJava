## 아이템 1. 생성자 대신 정적 팩터리 메서드를 고려하라

보통 클래스의 인스턴스는 public 생성자를 활용하여 생성한다. 그런데 클래스 자체는 생성자와 별도로 아래와 같은 정적 팩토리 메소드를 제공할 수 있다.

~~~java
public static int testMethod() {
  return 0;
}
~~~

위에서 설명한 바와 같이 클래스에서는 클라이언트에게 public 생성자를 제공해주지만 이 뿐만 아니라 정적 팩토리 메소드도 제공해줄 수 있다. 

~~~java
//public 생성자
public class MyBook {
  public MyBook() {}
}

//static factory method
public class MyBook {
  
  private MyBook() {}
  
  public static MyBook getInstance() {
    return new MyBook();
  }
}
~~~

그럼 public 생성자와 static factory method를 사용했을 때의 장점과 단점을 살펴보자.

---

### 정적 팩토리 메소드(static factory method)가 생성자보다 좋은 이유

**장점 1. 이름을 가질 수 있다.**

- public 생성자의 경우 생성자가 가지는 파라미터와 반환될 생성자 객체의 특성을 제대로 알 수가 없다. 즉, 반대로 말하면 생성자가 가지는 파라미터와 반환될 생성자의 특성을 제대로 알아야만 해당 생성자를 사용할 수 있다는 것이다.

- 반면, 정적 팩토리 메소드의 경우 메소드의 네이밍만 잘 짓는다면 어떤 객체가 반환되고 해당 메소드가 어떤 행동을 가지고 있는지 쉽게 파악이 가능할 것이다. 

  - 예를 들어, 생성자인 BigInteger(int, int, Random)과 정적 팩토리 메소드 BigInteger.probablePrime 중 어느 쪽이 '값이 소수인 BigInteger를 반환한다.'라는 의미를 더 잘 갖고 있는 지 알 수 있을 것이다. 

    ~~~java
    public BigInteger(int a, int b, Random rand) {}
    
    public static BigInteger probablePrime(int a, int b, Random rand) {
      return new BigInteger(a, b, rand);
    }
    ~~~

  - 또한, 한 클래스의 시그니처(메소드 명, 메소드 파라미터가 같은 것)가 같은 생성자가 여러 개 필요할 시에는 생성자를 오버로딩하여 구현하는 것이 아니라, 정적 팩토리 메소드를 활용하여 구현하는 것이 구분하기 더욱 편한 것이다.



**장점 2. 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.**

- 불편 클래스(객체가 가지는 값마다 새로운 인스턴스가 필요) 같은 경우 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용하고 있다. 

  ~~~java
  //1) 미리 만들어 놓은 인스턴스 활용
  Boolean flg = new Boolean(true); //(x)
  Boolean flg = Boolean.valueOf(true);	//(o) 미리 만들어 놓은 인스턴스를 반환
  
  //2) 생성한 인스턴스 재활용
  String str = "test";	//1. "test" 인스턴스를 생성
  String str2 = "test";	//2. 생성된 "test" 인스턴스를 재활용
  ~~~

  - 이로 인해서 생성 비용이 크고 반복적으로 호출되는 객체의 경우 메모리 성능을 끌어올려줄 수 있다.

  > 이와 비슷한 기법으로 플라이웨이트 패턴이라는 것이 있다.
  >
  > ***플라이웨이트 패턴***에 대해서 간략히 설명하면, String Constant Pool 처럼 클라이언트의 요청에 의해 객체를 생성할 때 생성하려는 객체가 Pool에 존재하면 반환만 해주고, 존재하지 않으면 생성 후 반환해주는 패턴 방식이다.

  

- 이런 방식들을 다시 말해 **인스턴스 통제 방식**이라고 할 수 있다. 인스턴스 통제를 하는 이유는 ***클래스를 싱글톤*** 으로 만들 수 있고, ***인스턴스화 불가*** 로 만들 수도 있으며, ***불변 클래스에서 동치인 인스턴스가 단 하나 뿐임을 보장(a == b일 때만 a.equals(b)가 성립)*** 할 수 있다. 

  > 열거 타입(Enum)의 경우 인스턴스가 하나만 만들어짐을 보장한다.



**장점 3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.**

- 이 능력에서 가장 중요한 것은 반환할 객체의 클래스를 자유롭게 선택할 수 있다는 것이다.

